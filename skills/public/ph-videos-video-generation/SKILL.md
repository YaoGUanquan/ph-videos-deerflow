---
name: ph-videos-video-generation
description: Generate videos from scripts using Volcano Seedance, Aliyun Wanxiang, or ComfyUI. Supports text-to-video, image-to-video. Multi-segment videos are merged with FFmpeg. Use after ph-videos-script-generation produces final script. Requires video_style (2D/3D/animation) and aspect_ratio from user or script metadata.
---

# ph-videos Video Generation Skill

## Overview

Generates videos from ph-videos-script-generation storyboard scripts via Volcano Seedance, Aliyun Wanxiang, or ComfyUI. **Multi-segment videos are merged with FFmpeg**.

## Core Capabilities

- Text-to-video (t2v), image-to-video (i2v), reference-to-video (r2v) (Wanxiang)
- Multi-segment videos generated per segment, then **FFmpeg concat merged**
- Requires video style (2D/3D/animation) and aspect ratio (16:9/9:16) from user

## Workflow

### Step 1: Gather Requirements

Before calling, confirm (ask user if not provided):

| Parameter | Description | Default |
|-----------|--------------|---------|
| **video_style** | 2D / 3D / 2D animation / photorealistic 3D / cartoon | 2D |
| **aspect_ratio** | 16:9 landscape / 9:16 portrait | 16:9 |
| **duration** | Per-segment duration (seconds) | 5 |

### Step 2: Prepare Script & Assets

- Script: from ph-videos-script-generation, one scene per line, 30–80 chars
- Assets: t2v none; i2v needs first-frame image; r2v needs reference video

### Step 3: Execute Generation

Call the script (**Do NOT read the python file, just call it with the parameters**):

```bash
python /mnt/skills/public/ph-videos-video-generation/scripts/generate.py \
  --provider volcano \
  --script-file /mnt/user-data/workspace/script.txt \
  --output /mnt/user-data/outputs/video.mp4 \
  --aspect-ratio 16:9 \
  --video-style "2D"
```

Or image-to-video:

```bash
python /mnt/skills/public/ph-videos-video-generation/scripts/generate.py \
  --provider wanxiang \
  --script-file /mnt/user-data/workspace/script.txt \
  --reference-images /mnt/user-data/uploads/first-frame.jpg \
  --wanxiang-mode i2v \
  --output /mnt/user-data/outputs/video.mp4 \
  --aspect-ratio 9:16 \
  --video-style "2D animation"
```

Parameters:

- `--provider`: volcano | wanxiang | comfyui (required)
- `--script-file`: Script file path (required)
- `--output`: Output video path (required)
- `--reference-images`: First-frame image path for i2v (required for i2v)
- `--wanxiang-mode`: t2v | i2v | r2v (Wanxiang, default t2v)
- `--aspect-ratio`: 16:9 | 9:16 (default 16:9)
- `--video-style`: 2D | 3D | 2D animation | photorealistic 3D | cartoon (default 2D)
- `--duration`: Per-segment duration in seconds (default 5)
- `--bgm-file`: BGM audio path (mp3/wav) to mix into video
- `--bgm-volume`: BGM volume 0.0–1.0 (default 0.3)

BGM can be generated by ph-videos-music-generation or uploaded by user.

### Step 4: Output Handling

- Videos saved to `/mnt/user-data/outputs/`
- Use `present_files` tool to share with user
- Briefly describe result, iterate if needed

## Platform Capabilities

| Platform | video_provider | Capabilities |
|----------|----------------|--------------|
| Volcano/Doubao Seedance | volcano | t2v, i2v |
| Aliyun Wanxiang | wanxiang | t2v, i2v, r2v |
| ComfyUI | comfyui | t2v, requires local/cloud ComfyUI |

## Environment Variables

- `VOLCANO_API_KEY` / `ARK_API_KEY`: Volcano API Key
- `DASHSCOPE_API_KEY`: Aliyun Wanxiang API Key

## Keywords

- Volcano, Doubao, Seedance, Aliyun Wanxiang, ComfyUI
- Text-to-video, image-to-video, video generation
- 2D, 3D, animation style, aspect ratio
